<?xml version="1.0" encoding="UTF-8" ?>
<!--

    Copyright 2017-2020 MuK IT GmbH
    License LGPL-3.0 or later (http://www.gnu.org/licenses/lgpl).

  -->
<odoo>
    <record id="view_dms_storage_tree" model="ir.ui.view">
        <field name="name">dms_storage.form</field>
        <field name="model">dms.storage</field>
        <field name="inherit_id" ref="dms.view_dms_storage_tree" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='is_hidden']" position="after">
                <field name="has_versioning" />
            </xpath>
        </field>
    </record>
    <record id="view_dms_storage_form" model="ir.ui.view">
        <field name="name">dms_storage.form</field>
        <field name="model">dms.storage</field>
        <field name="inherit_id" ref="dms.view_dms_storage_form" />
        <field name="arch" type="xml">
            <xpath expr="//header" position="inside">
                <button
                    name="action_delete_file_versions"
                    type="object"
                    string="Delete Versions"
                    attrs="{'invisible':[('has_versioning', '=', False)]}"
                />
                <button
                    name="action_clean_file_versions"
                    type="object"
                    string="Clean Versions"
                    attrs="{'invisible':[('has_versioning', '=', False)]}"
                />
            </xpath>
            <xpath expr="//field[@name='is_hidden']" position="after">
                <field name="has_versioning" />
            </xpath>
            <xpath expr="//notebook" position="inside">
                <page
                    name="versioning"
                    string="Versioning"
                    attrs="{'invisible':[('has_versioning','!=',True)]}"
                >
                    <group>
                        <group>
                            <field name="compress_versions" />
                            <field name="incremental_versions" />
                        </group>
                        <group>
                            <field name="stored_versions" />
                            <field name="clean_versions" />
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>
</odoo>
